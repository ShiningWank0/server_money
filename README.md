# Agent向け実装要件: Server Money アプリケーションUI (テキスト完全版)

この環境は全てuvライブラリを使用して管理されている。
テスト時もuv run app.pyなどとすること

## 1. プロジェクト概要

FlaskとVue.jsを使用し、静的なデモデータを用いて高機能な家計簿・資金管理UIを実装する。本ドキュメントは、実装の指針となるUI/UXの要件を、視覚的情報をすべて言語化して記述したものである。

## 2. デザイン哲学

* **基本コンセプト**: 全体の美的感覚は、紫から青へと移り変わる美しいグラデーション背景の上に、すりガラスのように半透明で角の丸い白いカードが浮かんでいるような、クリーンでモダンなデザインを目指す。
* **浮遊感と奥行き**: UIの主要な要素は、この「フローティング・カード」の原則に基づいて設計する。カードには柔らかな影（`box-shadow`）を持たせ、背景からわずかに浮き上がっているような奥行きを表現する。
* **情報設計**: UIは直感的でなければならない。特に、お金の流れを扱うアプリケーションとして、どこに何の情報があるかが一目でわかり、ユーザーが迷わず操作できることを最優先とする。

## 3. 推奨ファイル構成

メンテナンス性を考慮し、以下の通りファイルを分割して実装を進めること。

```
server_money/
├── app.py              # Flaskアプリケーション本体
├── static/
│   ├── css/
│   │   └── style.css   # スタイルシート
│   └── js/
│       └── main.js     # Vue.jsアプリケーションのロジック
└── templates/
    └── index.html      # HTMLの構造
```

## 4. コンポーネント別実装要件

### 4.1. 全体レイアウト (Body)

* 画面全体の背景として、左上から右下に向かって色が変化するグラデーションを適用する。
* CSS: `background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);`
* コンテンツは画面の中央に配置されるように、`display: flex; justify-content: center; align-items: center;` を用いてセンタリングする。

### 4.2. メインコンテナ

* 画面中央に、アプリケーションの全要素（ヘッダー、残高表示、取引履歴）を内包する一つの大きな「メインカード」を配置する。
* このカードは、デザイン哲学で述べたフローティング・カードの原則に従う。
    * 背景: `rgba(255, 255, 255, 0.9)` （背景が若干透ける半透明の白色）
    * 角丸: `border-radius: 20px;` （十分に丸みを感じさせる）
    * 影: `box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);` （柔らかく、はっきりとした影）
    * すりガラス効果: `backdrop-filter: blur(10px);`
    * 内側の余白: `padding` を十分に確保し（例: `3rem`）、中の要素が窮屈に見えないようにする。

### 4.3. ヘッダーエリア

メインカードの最上部に、水平なヘッダーエリアを設ける。このエリアは、内部の要素を左右の両端に振り分けるレイアウト（`display: flex; justify-content: space-between;`）とする。

* **左側の要素群**:
    1.  **ハンバーガーメニュー**: ヘッダーエリアの最も左に、水平な三本線で構成された「ハンバーガーメニューアイコン」を配置する。これはクリックすると設定メニューが開くことをユーザーに示唆する。
    2.  **項目名表示**: ハンバーガーメニューのすぐ右隣に、現在の資金管理項目名を表示する。テキストの先頭に下向きの黒三角形「▼」を付け、「▼ 資金項目名」のように表示することで、これがクリックで他の項目を選択できるドロップダウンメニューであることを示す。
* **右側の要素群**:
    1.  **検索ボックス**: ヘッダーエリアの最も右に、テキスト入力が可能な「検索ボックス」を配置する。
    2.  **プレースホルダー**: 検索ボックス内には、入力がない状態では「項目に関しての検索ができる」という薄いグレーのテキストを表示する。
    3.  **検索アイコン**: 検索ボックスの右端には、デザインと一体化した「虫眼鏡アイコン」を配置する。

### 4.4. 現在の残高エリア

ヘッダーエリアのすぐ下に、明確な区切り（例: `margin-top` や罫線）を設けて配置する。

* **表示内容**: 「現在の残高」というラベルテキストと、その下に大きくフォーマットされた金額（例: `¥207,300`）を表示する。テキスト表示には**`v-text`を使用**すること。
* **文字サイズ**: ラベル、金額ともに、最初の「Welcome」画面のタイトルよりは**一回り小さいフォントサイズ**に設定する。主張はしすぎないが、最も重要な情報として明確に視認できるバランスを保つ。
* **固定表示（スティッキー）**: このエリアは、ユーザーが取引履歴を**下にスクロールしても、常に画面の上部（ヘッダーの下）に固定**表示されるように設計する。その際、背景色をメインカードの背景色と同じに設定し、下のコンテンツが透けて見えないようにする (`position: sticky; top: 0; background-color: rgba(255, 255, 255, 0.9);`)。

### 4.5. 取引履歴テーブル

「現在の残高」エリアの下、メインカード内の主要なコンテンツエリアとして、取引履歴を示すテーブルを配置する。

* **カラム構成**: テーブルヘッダーとして左から順に「日付」「項目」「金額」「残高」という4つの見出しを配置する。
* **テキスト表示**: テーブル内の全ての動的テキスト（日付、項目名、金額など）の表示には**`v-text`を使用**すること。
* **ストライプ行（交互の背景色）**: テーブルの視認性を高めるため、データ行の背景色を**一行おきに白と薄い灰色（例: `#f8f9fa`）で交互に**設定する。
* **金額の条件付きハイライト**:
    * 「金額」列のセルのみ、取引の種類に応じて背景色を動的に変更し、ユーザーが入出金を直感的に識別できるようにする。
    * **入金の場合**: セルの背景色を**非常に薄い緑色**（例: `#e6ffed`）に設定する。テキスト色は黒または濃い緑とする。
    * **出金の場合**: セルの背景色を**非常に薄い赤色**（例: `#ffe6e6`）に設定する。テキスト色は黒または濃い赤とする。

---

**(以降のセクションは変更ありませんが、連続性のため再掲します)**

## 5. Vue.js 実装方針

### 5.1. セットアップ方法
ビルドツール（Vite, Webpack等）は使用せず、`index.html`内で`<script>`タグを用いてVue.jsのグローバルビルドをCDNから直接読み込む方式を採用する。これにより、プロジェクトの構成をシンプルに保つ。
```html
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
```

### 5.2. アプリケーションの初期化
Vueアプリケーションのインスタンスは、`static/js/main.js`ファイル内で作成し、`index.html`の特定の要素（例: `<div id="app">`）にマウントすること。

### 5.3. データバインディングの指示
テンプレート内のテキスト表示には、二重中括弧（`{{ }}`）構文ではなく、**`v-text`ディレクティブを必ず使用すること。** これは、過去の環境で確認されたレンダリングの安定性を確保するための重要な要件である。

## 6. デモデータ構造
`static/js/main.js` 内のVueアプリケーションで使用するデモデータの構造を以下のように定義する。このデータを用いてUIを構築すること。
```javascript
const transactions = [
    { id: 1, date: '2025-06-10', item: '給与', type: 'income', amount: 300000, balance: 300000 },
    { id: 2, date: '2025-06-09', item: '家賃', type: 'expense', amount: 80000, balance: 220000 },
    { id: 3, date: '2025-06-08', item: 'スーパーマーケット', type: 'expense', amount: 5500, balance: 214500 },
    { id: 4, date: '2025-06-07', item: '書籍購入', type: 'expense', amount: 2400, balance: 212100 },
    { id: 5, date: '2025-06-05', item: 'フリマ売上', type: 'income', amount: 3000, balance: 215100 },
    { id: 6, date: '2025-06-04', item: '通信費', type: 'expense', amount: 6000, balance: 209100 },
    { id: 7, date: '2025-06-03', item: '外食', type: 'expense', amount: 1800, balance: 207300 },
];
const currentBalance = 207300;
```
* **`type`キー**: `'income'`か`'expense'`の値を持つ。これが金額セルの背景色を決定するために重要となる。

## 7. 実装ステップ提案
1.  上記「3. 推奨ファイル構成」に基づき、各ファイルを作成する。
2.  `app.py`で`/`へのルーティングと`index.html`を返す`render_template`を設定する。
3.  `index.html`に基本的なHTML構造と、**Vue.jsのCDNスクリプトタグ**を記述する。
4.  `style.css`に全体レイアウト、メインコンテナのスタイルを適用する。
5.  `main.js`でVueアプリケーションを初期化し、「6. デモデータ構造」で定義したデータを`data`プロパティに設定する。
6.  `v-for`ディレクティブを使い、取引履歴テーブルにデモデータを描画する。**この際、テキストの表示には`v-text`を使用する。**
7.  `:class`（クラスバインディング）を使い、`transaction.type`の値に応じて`income-cell`や`expense-cell`といったクラスを動的に付与し、CSSでそれぞれの背景色を定義する。
8.  「現在の残高」エリアにスティッキーポジションを適用し、スクロールしても追従することを確認する。

## サーバ実行方法

本番・開発環境ともに、Flaskアプリは `waitress` で起動します。

```sh
uv add -r requirements.txt
uv run app.py
```

- `gunicorn` は不要です。
- `uv` コマンドで仮想環境を管理し、依存解決・実行を行ってください。